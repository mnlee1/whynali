# 담당 B Day 3–11 체크리스트

## Day 3–4

**담당 B Day 3–4 (0.5일 체크리스트)**
- Day 3 AM: Auth API 최소(로그인 검증, `me`, 권한 미들웨어) + 세이프티 인터페이스(`validate/sanitize/rateLimit`) 확정
- Day 3 PM: 댓글 CRUD + 감정(리액션) 토글 API, 본인 수정/삭제 권한, 기본 페이지네이션
- Day 4 AM: 투표 API(생성/참여/취소/마감) + 토론 주제 API(생성/목록/상세), 도메인 규칙 검증
- Day 4 PM: 토론 댓글 CRUD + 글로벌 검색 최소 버전(이슈/토론 주제), 통합 테스트/문서 업데이트
- 완료 기준: 인증/권한·에러 응답 일관, 핵심 플로우 E2E 통과, 데모 가능 상태

## Day 5–6

**담당 B Day 5–6 (0.5일 체크리스트)**
- Day 5 AM: 이슈 상세 상단/메타/탭 UI 구성 + 감정·투표 영역 컴포넌트 분리(병합 기준 인터페이스 고정)
- Day 5 PM: 감정(리액션)·투표 API 연동, 로딩/중복 클릭 방지, 비로그인 사용자 가드 처리
- Day 6 AM: 댓글 목록/작성/수정/삭제 + 페이지네이션 연동, 권한별 버튼 노출/숨김 처리
- Day 6 PM: 커뮤니티 목록/상세 + 글로벌 검색 연결, 로그인 퍼블 연결, 에러/빈 상태/스켈레톤 정리
- 완료 기준: 이슈 상세 핵심 플로우(감정·투표·댓글) 동작, 커뮤니티·검색 진입/결과 확인, 데모 가능 상태

## Day 8–11

**담당 B Day 8–11 (0.5일 체크리스트)**
- Day 8 AM: 토론 주제 목록/상세 화면과 API 연결, 상태(진행/종료) 표시 규칙 정리
- Day 8 PM: 토론 댓글 목록/작성/수정/삭제 연동, 권한별 액션 노출 및 기본 페이지네이션 반영
- Day 9 AM: 세이프티(`validate/sanitize`)를 토론 작성/댓글 입력 플로우에 통합, 에러 메시지 표준화
- Day 9 PM: 세이프티 `rateLimit` 적용, 중복 요청 방지 및 실패 재시도/가이드 처리
- Day 10 AM: 관리자 토론 주제 관리(생성/수정/숨김/종료) UI + API 연동
- Day 10 PM: 관리자 세이프티 관리(금칙어/정책/로그 조회) UI + API 연동
- Day 11 AM: 토론/세이프티 운영 시나리오 통합 테스트(일반 사용자/관리자) 및 회귀 점검
- Day 11 PM: 에러/빈 상태/스켈레톤 정리, 데모 시나리오 점검, 문서 체크리스트 업데이트
- 완료 기준: 토론·세이프티 사용자/관리자 핵심 플로우 동작, 권한/제한 정책 일관 적용, 데모 가능 상태

## 추후 작업 (미완료)

**관리자 접근 인증 (배포 전 필수)**
- [ ] `middleware.ts`에 `/admin`, `/api/admin` 경로 보호 재활성화 (현재 비활성 — 누구나 접근 가능 상태)
- [ ] GNB 관리자 버튼을 `isAdmin` 기반으로 복구 (`Header.tsx` — `isAdmin` state + `/api/auth/is-admin` 호출)
- [ ] `.env.local` `ADMIN_EMAILS`에 관리자 이메일 등록 확인 (현재: `nhnad.deflow@gmail.com`)
- [ ] Vercel 배포 환경변수에도 `ADMIN_EMAILS` 동일하게 설정
- 참고: `lib/admin.ts`, `app/api/auth/is-admin/route.ts` 구현 완료 상태 — 미들웨어·헤더만 재연결하면 됨

**이메일 알림 설정 (Resend)**
- [ ] [resend.com](https://resend.com) 가입 후 API Key 발급 → `.env.local` `RESEND_API_KEY` 입력
- [ ] 도메인 소유 시: DNS SPF/DKIM 레코드 추가 → `EMAIL_FROM` 커스텀 도메인으로 변경
- [ ] 도메인 없는 경우: Resend 기본 도메인(`onboarding@resend.dev`)으로 테스트 가능
- [ ] `.env.local` `ADMIN_NOTIFY_EMAILS` 에 수신자 이메일 입력 (콤마 구분 다중 설정 가능)
- [ ] 알림 트리거 연동: 댓글 등록 API(`notifyPendingComment`), 이슈 생성 API(`notifyPendingIssue`) 호출 추가
- [ ] Vercel 배포 환경변수에도 동일하게 설정 (`RESEND_API_KEY`, `EMAIL_FROM`, `ADMIN_NOTIFY_EMAILS`, `NEXT_PUBLIC_SITE_URL`)
