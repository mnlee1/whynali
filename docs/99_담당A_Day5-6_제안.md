# 담당 A Day 5–6 작업 제안

로드맵: 홈·카테고리 메뉴·이슈 목록·이슈 상세(화력·타임라인·출처) 퍼블 + API 연동.

---

## 1. 작업 순서 (권장)

1. **공통·재사용** – 이슈 목록용 타입·fetch 유틸, 카드/목록 컴포넌트
2. **이슈 목록 화면** – 홈 + 카테고리 5곳에서 같은 목록 UI 재사용, 검색/필터/정렬
3. **이슈 상세(담당 A 영역)** – 화력·타임라인·출처만 퍼블 + API 연동

---

## 2. 공통 준비

### 2.1 타입

- `types/issue.ts` 이미 있음. API 응답용으로 `IssueListItem` 등 필요한 타입만 추가.

### 2.2 API 호출 함수 (클라이언트)

- `lib/api/issues.ts` 생성 권장.
  - `getIssues(params?)` → `GET /api/issues` (category, status, q, sort, limit, offset)
  - `getIssue(id)` → `GET /api/issues/[id]`
  - `getTimeline(issueId)` → `GET /api/issues/[id]/timeline`
  - `getSources(issueId)` → `GET /api/issues/[id]/sources`
- 서버 컴포넌트에서 쓰면 `fetch(process.env.NEXT_PUBLIC_SITE_URL + '/api/...')` 또는 상대 URL. 로컬에서는 `http://localhost:3000` 등 base URL 필요 시 환경 변수로.

### 2.3 공통 컴포넌트 (담당 A)

| 컴포넌트 | 용도 |
|----------|------|
| `IssueCard` | 목록 한 줄: 제목, 카테고리, 상태, 화력, 날짜, 링크 |
| `IssueList` | 검색/필터/정렬 UI + `IssueCard` 리스트, 로딩·빈목록 처리 |
| `IssueDetailA` | 상세 페이지 내 A 영역: 제목·상태·화력·타임라인·출처 (B 영역은 placeholder) |

---

## 3. 홈 (app/page.tsx)

- **역할**: 전체 이슈 목록(카테고리 무관) 또는 “기본 카테고리” 진입. 로드맵에선 “메인 = 이슈 목록 전체 또는 연예 등 기본 카테고리 리다이렉트” 가능.
- **구현**: `IssueList` 사용. `category` 없이 `GET /api/issues` 호출.
- **선택**: 홈을 “전체 목록”으로 고정하거나, 특정 카테고리(예: 연예)로 리다이렉트하도록 팀 합의.

---

## 4. 카테고리 메뉴 5곳 (연예·스포츠·정치·사회·기술)

- **경로**: `app/entertain/page.tsx`, `app/sports/page.tsx`, `app/politics/page.tsx`, `app/society/page.tsx`, `app/tech/page.tsx`
- **공통**: 각 페이지는 `IssueList`에 `category`만 넘김 (연예/스포츠/정치/사회/기술).
- **데이터**: `GET /api/issues?category=연예` 형태로 호출. 5개 페이지를 레이아웃·공통 컴포넌트로 묶어서 한 번에 구현해도 됨 (예: `app/(categories)/[category]/page.tsx` 또는 5개 파일에서 같은 `<IssueList category="연예" />` 사용).

---

## 5. 이슈 목록 화면 (IssueList)

- **URL**: 홈은 `?` 없이, 카테고리는 `?category=연예` 등. 목록 페이지 내 검색/필터는 쿼리 유지.
- **기능**:
  - 검색: `q` (키워드)
  - 필터: `status` (점화/논란중/종결)
  - 정렬: `sort` (latest | heat)
  - 페이지네이션: `limit`, `offset` (또는 `page`로 변환)
- **UI**: 입력창(검색), 드롭다운 또는 탭(상태·정렬), 카드 리스트, “더 보기” 또는 페이지 번호. 로딩 스피너, 에러·빈 목록 문구.
- **스타일**: 인라인 스타일 금지. Tailwind 또는 `globals.css` 클래스만 사용.

---

## 6. 이슈 상세 – 담당 A 영역 (app/issue/[id]/page.tsx)

- **담당 A**: 상단 제목·상태·화력, 타임라인, 출처 링크.
- **담당 B**: 감정·댓글·투표, “이 이슈의 커뮤니티” 링크 (나중에 합침). 당장은 빈 영역 또는 “준비 중” 플레이스홀더.
- **데이터**:
  - `GET /api/issues/[id]` → 제목, description, status, category, heat_index, created_at 등
  - `GET /api/issues/[id]/timeline` → 타임라인 포인트 목록 (occurred_at, source_url, stage)
  - `GET /api/issues/[id]/sources` → news, community 배열 (제목, 링크, 출처, 날짜 등)
- **화력 표시**: 02 확정 – 숫자 + 등급(높음 70 이상, 보통 30–70 미만, 낮음 30 미만). 문구만 표시 (예: "72 (높음)").
- **타임라인**: 위→아래 시간순(발단→전개→파생→진정). 카드 형태, 출처 링크 클릭 시 새 탭.
- **출처**: 뉴스·커뮤니티 구분해 제목·링크·출처명·날짜 표시, 링크는 외부 열기.

---

## 7. 파일/폴더 구조 제안

```
app/
  page.tsx                      # 홈: <IssueList />
  entertain/page.tsx            # <IssueList category="연예" />
  sports/page.tsx               # <IssueList category="스포츠" />
  politics/page.tsx             # <IssueList category="정치" />
  society/page.tsx              # <IssueList category="사회" />
  tech/page.tsx                 # <IssueList category="기술" />
  issue/[id]/page.tsx           # <IssueDetailA id={id} /> + B 영역 placeholder

components/
  issues/
    IssueCard.tsx               # 목록용 카드
    IssueList.tsx               # 검색/필터/정렬 + 목록
  issue/
    IssueDetailA.tsx            # 화력·타임라인·출처
    TimelineSection.tsx         # 타임라인 블록
    SourcesSection.tsx         # 출처(뉴스·커뮤니티) 블록

lib/
  api/
    issues.ts                   # getIssues, getIssue, getTimeline, getSources
```

---

## 8. API 규약 복기

- 목록: `GET /api/issues?category=&status=&q=&sort=latest|heat&limit=20&offset=0` → `{ data: [], total }`
- 상세: `GET /api/issues/[id]` → `{ data: { id, title, ... } }`
- 타임라인: `GET /api/issues/[id]/timeline` → `{ data: [ { id, occurred_at, source_url, stage } ] }`
- 출처: `GET /api/issues/[id]/sources` → `{ news: [], community: [] }`

---

## 9. 체크리스트 (Day 5–6 완료 시)

- [ ] 홈에서 이슈 목록 API 연동, 목록 표시
- [ ] 연예·스포츠·정치·사회·기술 각 페이지에서 해당 카테고리 목록 표시
- [ ] 목록 화면에서 검색(q), 상태 필터(status), 정렬(sort) 동작
- [ ] 이슈 카드 클릭 시 `/issue/[id]` 이동
- [ ] 이슈 상세에서 화력(숫자+등급), 타임라인, 출처 표시
- [ ] 타임라인·출처 링크 새 탭 열기
- [ ] 담당 B 영역은 placeholder 또는 빈 영역으로 두고, 나중에 컴포넌트만 교체 가능하게 구성

---

## 10. 참고

- 97_API규약.md, 97_1단계_기초픽스.md §4
- 02_AI기획_판단포인트 §4 (화력 등급, 이슈 상태 표시)
- 인라인 스타일 사용 금지, 공백 4칸
