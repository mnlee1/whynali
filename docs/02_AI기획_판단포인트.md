# AI 기획 문서 (판단 포인트 기준)

다른 AI의 기획·개발 참조용. **사람이 판단해야 할 지점만** 명시한다. 

---

## 1. 확인 필요

- **웹 전용 vs 앱 동시 제공**: **결정됨**
  - MVP는 웹만. 모바일 퍼스트, PC 지원 포함해 반응형으로 구현.
  - 앱은 추후 확장 시 검토(확장 가능성 고려해 설계).
  - 선택 이유: 모바일·PC 모두 반응형으로 커버 가능하고, 앱은 추후 확장 가능성만 열어두면 됨.

- **네이버 뉴스 카테고리 ↔ 이슈 카테고리**: **결정됨**
  - MVP는 이슈 카테고리 = 네이버 뉴스 API 카테고리만 사용.
  - 확장 시(커뮤니티/메뉴 필요 시) 카테고리 추가·매핑 규칙 검토.
  - 메뉴 노출과 데이터(뉴스·크롤링) 분류는 같은 한 체계(네이버 기준 + 필요 시 추가분 공통).
  - 선택 이유: 기획상 네이버 API가 기준이 맞고, 커뮤니티/메뉴에서 안 맞는 부분은 확장 시 보완. 메뉴와 분류를 한 체계로 두어 단순화.

- **추천 이슈(개인화) 노출 방식**: **MVP 제외**
  - 확장 시 별도 탭/영역(예: "추천" 탭 또는 "당신을 위한 이슈" 블록)으로 구현.
  - 선택 이유: MVP에서는 전체 이슈 목록에 집중하고, 개인화는 사용자 데이터 축적 후 확장 단계에서 추가.

---

## 2. 결정 필요 (선택지)

- **뉴스 수집 주기**: **결정됨** — 30분 단위.
  - 선택 이유: 서비스 기획상 "빠른 이슈 파악"에 30분이 적합하고, 1시간은 체감이 느림.
  - AI 비용 부담 시 요약은 배치/주기 분리해 조절.

- **타임라인 배치**: **결정됨** — 위→아래 시간순(발단→전개→파생→진정). 세로 스크롤.
  - 선택 이유: 모바일 퍼스트에서 세로 스크롤이 자연스럽고, 시간 흐름 표현에 맞음.

- **관리자 개입 수준**: **결정됨** — 개입 최소화.
  - **용어**: "배치 처리/배치 승인" = 관리자가 승인/반려를 **한꺼번에**(일 1~2회 등) 처리한다는 뜻. **노출은 "승인"한 것만** 되고, 반려한 것은 노출되지 않음. (배치 처리 ≠ 일괄 노출.)
  - 이슈 등록: 임계값(5건 이상) 초과 시 알람. 실시간 불가 시 B 적용 — 8건 이상이고 N(6시간 이상) 무대응 시에만 자동 승인, 그 외는 일 1~2회 배치 승인.
  - AI 요약·타임라인: 배치 승인(하루 1~2회 대기 목록 처리).
  - 세이프티봇 검토: 일 1회 또는 10건 이상 시 배치 검토.
  - 수집↔이슈 연결: 자동 연결 규칙 + 애매한 건만 관리자 화면에서 처리.
  - 선택 이유: 리소스 절약하면서 "지금 난리" 이슈(임계값 초과)는 즉시 반영하고, 나머지는 배치로 처리해 상시 확인 부담을 줄임.

- **이슈 등록 — 관리자 실시간 승인/반려 불가 시 대안**: **B 적용(결정됨)**. 자동 승인 기준은 타이트하게 둠.
  - **A. 전부 배치 + 우선순위만 반영** (미채택)  
    임계값 초과 시 "즉시 승인/반려"를 요구하지 않음. 알람(이메일·배너)은 그대로 보내고, 대기 목록에서 임계값 초과 건만 상단 정렬. 관리자는 일 1~2회 배치 처리 시 목록 맨 위부터 승인/반려.
  - **B. N시간 무대응 시 자동 승인** — **채택**
    - 임계값 초과 시 알람(이메일·배너) 발송. **N시간 내 관리자 처리 없으면** 해당 후보를 자동 승인(공개). 가능한 한 사람이 먼저 처리하고, 불가 시에만 자동 공개.
    - **자동 승인 기준(타이트)**  
      - **N**: **6시간 이상**. (예: 6시간. 운영 중 12시간 등으로 더 늘려도 됨. 2시간처럼 짧게 두지 않음.)  
      - **자동 승인 대상**: "임계값(5건) 초과"만으로는 부족. **같은 이슈 후보에 대해 최근 1시간 수집이 8건 이상**일 때만 N시간 무대응 시 자동 승인 후보로 둠. 5~7건 구간은 자동 승인되지 않고, 관리자 배치 처리에서만 승인/반려. (8건은 운영 중 10건 등으로 더 올려도 됨.)  
    - 부적절 이슈 노출에 대비해 운영 정책(삭제·비공개 기준) 수립 필요.
  - **C. 자동 등록 + 사후 검토** (미채택)  
    임계값 초과 시 즉시 자동 공개 후 사후 검토. 노출 선행이라 미채택.

---

## 3. 우선순위·범위 (필수 / 선택 / 보류)

| 항목 | 상태 | 비고 |
|------|------|------|
| 이슈 목록·상세 | 필수 | MVP 핵심 기능 |
| 타임라인 표시 | 필수 | 시간순 배치, 출처 링크 |
| 화력 분석 | 필수 | 메타데이터 기반 이슈 화력 지수 |
| 이슈 상태 관리 | 필수 | 점화/논란 중/종결 |
| 뉴스 수집 | 필수 | 네이버 API, 30분 주기 |
| 커뮤니티 메타데이터 수집 | 필수 | 더쿠·네이트판 2곳, 3분 주기 |
| 오픈ID 로그인 | 필수 | 구글·네이버·카카오 3종 |
| 감정 표현 7종 | 필수 | 좋아요, 싫어요, 화나요, 팝콘각, 응원, 애도, 사이다 |
| 댓글 | 필수 | 상단 베스트(좋아요−싫어요 score 상위). 아래 리스트 정렬: 최신순/좋아요순/싫어요순. 좋아요/싫어요. 가정 6.4 "댓글·베스트/리스트 정렬" 참조. |
| 투표 | 필수 | 이슈당 복수 투표 가능(시점/상황별 여론 변화 반영), 2-4 선택지, 실시간 그래프 |
| 커뮤니티 | 필수 | 메뉴명 "커뮤니티". 승인된 이슈 기반 AI 토론 주제 생성 → 관리자 승인 → 등록 후 철학적 관점 토론. 유저는 댓글로 의견 참여. 화면·정책은 가정 6.4 "커뮤니티" 참조. |
| 세이프티봇 | 필수 | 자동 검토, 금칙어 매칭 |
| 관리자 기능 | 필수 | 이슈 등록 승인, 수집 데이터 확인. 화력 분석은 수치만 노출되므로 자동 반영 가능(배치 승인은 선택, 섹션 4 "화력 분석 노출" 참조). |
| 메타(페이스북) 로그인 | 보류 | 확장 시 검토 |
| 개인화·추천 | 선택(확장) | MVP 제외, 데이터 축적 후 추가 |
| 알림 | 선택(확장) | MVP 제외 |
| 숏폼 자동 생성 | 선택(확장) | MVP 제외 |
| 복수 투표 | 필수 | 시점/상황에 따라 여론이 변할 수 있으므로 이슈당 복수 투표 가능해야 함 |
| 본문 수집·AI 요약 | 제외 | 법적 리스크로 영구 제외 |

---

## 4. 수치·기준값 (미확정 시 질문으로 유지)

- **뉴스 수집 주기**: 30분(결정됨). 네이버 API 데이터 그대로 표시. 추가 AI 가공 없음.
  - 선택 이유: "빠른 이슈 파악"에 30분이 적합하고, 1시간은 체감이 느림.

- **네이버 뉴스 API 일일 한도 대응**: **결정됨**
  - (1) 사용량이 일일 한도의 80%에 도달하면 관리자에게 알림(이메일 + 관리자 대시보드 상단 해제형 알림 배너).
  - (2) 한도에 가까워지면 수집 주기를 30분 → 1시간 등으로 늘려 당일 한도 내에서만 호출.
  - 한도 초과 시 당일 수집 중단, 다음 날 30분 주기 재개.
  - 선택 이유: 무료 한도 초과를 막으면서 당일 최대한 수집 유지.

- **커뮤니티 수집 주기**: **결정됨** — 3분.
  - 메타데이터만 수집(제목, URL, 조회수, 댓글수, 작성시간). 본문 수집 및 AI 요약 없음.
  - 선택 이유: 1분은 사이트 차단·rate limit 리스크가 크고, 5분은 실시간감이 떨어짐. 3분은 실시간 이슈 포착과 무료 한도·리스크 균형이 맞음. 법적 리스크 최소화.

- **이슈 등록 임계값**: **결정됨**
  - 최근 1시간 동안 동일 이슈 후보로 묶인 수집 건수(뉴스+커뮤니티)가 **5건 이상**이면 `issues` 테이블에 `approval_status='대기'`로 자동 등록 + 수집 건 `issue_id` 연결 + 관리자 대시보드 해제형 배너 알람.
  - 관리자는 이슈 관리 대기 목록에서 해당 이슈를 확인하고 승인/반려 처리.
  - 최근 24시간 내 같은 제목 이슈가 이미 존재하면 중복 등록 방지. 승인/반려된 이슈는 재처리하지 않음.
  - **관리자 실시간 불가 시**: **B 적용**. N 6시간 이상, 자동 승인 대상은 수집 8건 이상일 때만(타이트). 기존 대기 이슈가 있으면 `'승인'`으로 업데이트, 없으면 바로 `'승인'`으로 신규 생성.
  - 이슈 등록 직후 연결된 수집 데이터 기준으로 화력(heat_index) 즉시 계산.
  - 선택 이유: 5건이면 "슬슬 터지는" 단계에서 관리자가 목록에서 바로 확인·처리 가능. 배너만 표시하면 실제 승인/반려 동선이 없어 처리 불가.

- **화력 분석 비용**: **결정됨**
  - 자체 알고리즘 사용 시 무료. 경량 AI 사용 시 월 수천원 이하.
  - 본문 요약·재가공 없으므로 비용 최소화.
  - 선택 이유: 화력 분석은 경량 AI만 쓰기로 해서 월 수천원 이하로 통제. 본문 안 쓰므로 비용·법적 리스크 모두 최소.

- **화력 분석 방식 (MVP)**: **결정됨** — B. 경량 AI만 사용.
  - 선택 이유: 구현 경로 단일화로 일정·품질 예측이 쉽고, 월 수천원 이하 비용은 부담이 크지 않음. 경량/일반 AI 법적 구분은 5.6 참조.
  - **화력 만점 기준 (현행)**: 뉴스 출처 20곳 이상 + 뉴스 50건 이상 → 뉴스 신뢰도 만점. 커뮤니티 조회수 합산 약 14,285건 이상 또는 댓글 합산 약 1,111건 이상 → 커뮤니티 화력 만점. 상세 계산식은 07_이슈등록_화력_정렬_규격.md §2.3 참조.

- **화력 분석 노출 — 관리자 승인 여부**: **결정됨** — 자동 반영.
  - 화력 분석 결과는 **메타데이터 기반 수치**(화력 지수, 등급)일 뿐이라, 이슈·토론 주제처럼 "내용 검토"가 필요한 대상이 아님. 따라서 **관리자 승인 없이 자동 반영**함.
  - 화력 분석(배치 또는 주기 실행) 결과를 승인 단계 없이 바로 서비스에 반영. 관리자 부담 감소, 개입 최소화 원칙에 부합.
  - (참고) 운영상 "한 번에 반영 시점을 통제하고 싶을 때"만 배치 승인 방식으로 전환 검토 가능.

- **비용 초과 시**: **결정됨**
  - 한도 초과 직전(예: 80% 도달)에 (1) 관리자 이메일 발송, (2) 관리자 대시보드 상단에 해제형 알림 배너(dismissible persistent banner) 표시.
  - 배너는 X 버튼으로 닫기 전까지 유지.
  - 초과 후에는 당시 사용량·트래픽 보고 유료 전환 여부 결정.
  - 선택 이유: MVP 단계에서 선제적 유료 전환 기준을 정하기 어렵고, 실제 초과 시점에 판단하는 편이 합리적.

- **도메인**: **배포 시 결정**
  - 예상: whynali.com (A). whynaly.com은 후보. 확정 전까지 두 도메인 모두 유지.
  - 선택 이유: 배포 전에 확정 예정. whynali.com 사용 가능성 높아 예상으로만 기재.

- **감정 표현 변경**: **결정됨** — 변경 가능.
  - 이슈당 1인 1회이지만, 선택한 감정을 다른 항목으로 바꾸거나 취소 후 재선택 가능.
  - 선택 이유: 네이버 뉴스·유튜브·Reddit·Facebook 등 뉴스·소셜 플랫폼이 리액션 변경·취소를 허용하는 관례에 맞춤.

- **세이프티봇 오탐 방지**: **결정됨**
  - (1) 단어 경계 매칭(단어/토큰 단위로만 매칭), (2) 금칙어 목록 최소화(명확한 위반만).
  - 관리자 검토는 유지. 검토 배치는 일 1회 또는 10건 이상 시. 매칭 방식·목록·검토 주기는 운영 중 변경 가능.
  - 선택 이유: 오탐을 사람 없이 줄이려고. 단어 단위 매칭은 "다른 단어 일부와 겹쳐 걸리는" 경우를 줄이고, 목록 최소화는 애매한 걸 막아서 걸리는 건 적게. 그래도 오탐은 완전 제거 불가라 관리자 검토는 두고, 나중에 규칙이 맞지 않으면 바꿀 수 있게 함.

- **세이프티봇 검토 배치 N건**: **결정됨** — 10건.
  - 검토 대기가 10건 이상이면 그때마다 배치 검토. 그 외에는 일 1회 배치 검토.
  - 선택 이유: MVP 초기에는 검토 대기 건수가 많지 않을 가능성이 커서 10건이면 부담 적음. 5건보다 알람·검토 횟수 적고, 일 1회만보다는 대기 급증 시 대응 가능. 운영 중 조정 가능.

- **검토 대기 시 사용자 메시지**: **결정됨** — (B) 검토 사유만 간단히.
  - **적용 대상**: 세이프티봇(금칙어·키워드)에 걸려 **검토 대기**된 댓글·토론글에 한함. 정상 공개되는 글에는 이 메시지를 노출하지 않음.
  - 문구: "등록되었습니다. 내용 검토 후 공개되거나 삭제될 수 있습니다."
  - 선택 이유: 검토 중이라는 상태를 명확히 해 오해를 줄임. 문구가 짧아 토스트·인라인 안내에 적합. 문의 경로는 채널 생기면 확장 시 추가.

- **이슈 상태 표시**: **결정됨** — (B) 텍스트 + 아이콘.
  - 점화/논란 중/종결 각각 아이콘 하나씩, 옆에 텍스트 병기.
  - 선택 이유: 한눈에 구분 가능. 아이콘 의미·디자인은 구현 단계에서 결정.

- **화력 지수 표시**: **결정됨** — (C) 숫자 + 등급.
  - 예: "72 (높음)". 숫자와 등급을 함께 표시.
  - 선택 이유: 숫자로 비교·트렌드 파악, 등급으로 한눈에 수준 파악.
- **화력 지수 등급 기준**: **결정됨** — 아래 구간 적용. (경량 AI·알고리즘 출력이 0–100 스케일이라고 가정.)
  - **높음**: 70 이상.
  - **보통**: 30 이상 ~ 70 미만.
  - **낮음**: 30 미만.
  - 구현 시 스케일(0–100 등)이나 구간 수·명칭은 조정 가능.

- **이슈 목록 기본 정렬**: **결정됨** — 최신성 + 화력을 함께 반영한 복합 정렬.
  - **원칙**: (1) **최신 이슈이면서 화력이 높은 것**이 제일 위에 노출. (2) **현재 상태가 종결인 이슈**는 화력이 높아도 상단에 노출되지 않도록 함. (3) 이슈 진행상황(점화/논란중/종결)은 **변경 가능**함(종결 → 논란중 등으로 다시 바뀔 수 있음). 정렬은 **현재 상태**만 기준으로 하므로, 나중에 종결에서 점화·논란중으로 바뀌면 그때부터 다시 상단 노출 후보가 됨.
  - **구현 방향**: 최신성(또는 이슈 상태)과 화력을 조합한 점수/가중치로 정렬. 1차 = **현재** 상태(점화/논란중 우선, **현재** 종결은 하단)·2차 = 최신성·3차 = 화력. 상태가 변경되면 정렬·스코어를 재계산하여 반영(종결 → 점화·논란중으로 바뀐 이슈는 즉시 상단 쪽으로 올라갈 수 있게).
  - (선택) 목록에 "최신순"·"화력순" 전환 옵션을 두되, 기본은 위 복합 정렬.
  - 선택 이유: "지금 난리"는 최근에 뜨고 있는 이슈가 위로 가야 하고, 현재 종결된 이슈가 화력만 높아 상단에 머무는 것을 막기 위함. 진행상황이 다시 바뀔 수 있으므로 "현재 상태" 기준으로만 판단함.

---

## 5. 리스크 판단 (사람 판단 유지)

### 5.1 커뮤니티 수집 리스크 분석

**수집 대상 선정:**
- 총 9곳 검토. **수집 2곳(더쿠, 네이트판)만.** 약관 전문 검토 완료한 곳만 수집 대상.
- 제외 7곳: 클리앙·인스티즈·보배드림·펨코·엠팍 (약관 금지 또는 robots.txt 차단). **루리웹·뽐뿌(약관 전문 미확인).**

**법적 이슈 있는 사이트 (수집 제외):**
- 클리앙·인스티즈·보배드림: 약관상 무단 수집·복제 금지
- 펨코·엠팍: robots.txt 전면 차단 (Disallow: /*)
- **루리웹·뽐뿌: 약관 전문 미확인. 수집 금지 조항 유무를 확인하지 않았으므로 수집 제외.** 수집하려면 사람이 약관 전문을 직접 확인한 뒤 판단할 것.

**수집 가능 사이트 (더쿠·네이트판):**
- 약관상 명시적 수집 금지 조항 없음
- robots.txt 차단 없음 (더쿠는 404, 네이트판은 타임아웃)
- 메타데이터는 사실 정보로 저작권 보호 대상 아님

### 5.2 우리 서비스 실행 방안

**수집 범위:**
- ✅ 제목, URL, 조회수, 댓글수, 작성시간 (메타데이터만)
- ❌ 본문, 닉네임, 기타 창작 콘텐츠 (수집 안 함)

**법적 근거:**
- 대법원 2009다6735: 사실 정보는 저작권 보호 대상 아님
- 대법원 2008da55354: 공개된 사실 정보 수집은 DB권 침해 아님
- 대법원 2012다76829: 제목+링크 표시는 공정 이용 범위

**표시 방식:**
- 제목: 링크와 함께 표시 (원문 트래픽 기여)
- 출처 링크 제공
- 본문 요약 없음, AI 재가공 없음

### 5.3 화력 분석 (저작권 리스크 없음)

**분석 대상:**
- 메타데이터만 (조회수, 댓글수, 반응 속도 등)
- 본문 내용 분석 없음

**산출 결과:**
- 이슈 화력 지수 (숫자, 0–100 스케일 가정).
- 표시: 숫자 + 등급(높음 70 이상 / 보통 30–69 / 낮음 30 미만).
- 상승세/하강세 추이.
- 본문 요약·재가공 없음.

**법적 안전성:**
- 사실 정보 기반 통계 분석 (대법원 2016da271580)
- 저작권 침해 없음

### 5.4 뉴스 수집 (법적 이슈 없음)

**수집 방식:**
- 네이버 뉴스 API 사용 (공식 라이선스)
- API 응답 중 제목·링크·출처·날짜만 수집·표시 (요약문은 미수집. 04 4.3.1)
- 추가 AI 가공 없음

**수집·표시 항목:**
- 제목, 링크, 출처, 날짜. **요약문(description)은 수집·저장·표시하지 않음**(04 4.3.1 참조. 저작권·약관 리스크 최소화).
  - **이유**: 요약문(description)은 판례상 저작물로 볼 가능성이 있고(네이버 뉴스스탠드 판례 2019가합573789 등), 네이버 API 요약문을 수집·저장 후 AI로 재가공하거나 그대로 노출 시 네이버 API 약관(검색 결과 조작 금지) 및 저작권법(2차적 저작물) 리스크 발생. 수집·저장하지 않으면 해당 텍스트에 대한 저작권·약관 문제가 원천 차단됨(04 4.3·4.3.1).
- 원문 링크 제공

**법적 안전성:**
- 공식 API 라이선스 범위 내 사용
- 저작권 이슈 없음

### 5.5 기타 리스크

| 리스크 요인 | 대응 방안 | 비고 |
|-----------|----------|------|
| 과도한 트래픽 | 3분 주기 수집 | IP 차단 방지 |
| 개인정보 수집 | 닉네임 수집 안 함 | 익명화·최소화 |
| DB권 침해 | 메타데이터만 수집 | 본문 제외 |
| 저작권 침해 | AI 요약 없음 | 링크만 제공 |
| 부정경쟁 | 출처 명시, 트래픽 기여 | 원 사이트 이익 |

**결론**: ✅ 메타데이터만 수집하는 방식은 약관·저작권법·DB권 위반 아님.

**상세 분석**: `03_커뮤니티수집_법적검토.md` 참조.
- 더쿠·네이트판 약관 전문, 판례 상세, 수집 항목별 법적 판단.

### 5.6 경량 AI vs 일반 AI (법적 구분)

**경량 AI (본 서비스에서 허용 범위):**
- **역할**: 메타데이터(조회수, 댓글수, 반응 속도 등)만 입력으로 사용해 이슈 화력·주목도 등 **숫자·지표**만 산출.
- **입력**: 본문 없음. 짧은 메타데이터·수치만 사용. 호출·토큰 사용 최소화.
- **법적 위치**: 저작물(본문)을 이용한 2차적 저작물 생성이 아니므로 저작권·API 약관 리스크 낮음.
  - 화력 분석에 사용 가능.

**일반 AI (본문 요약·재가공, 본 서비스에서 영구 제외):**
- **역할**: 기사·게시글 **본문**을 입력해 요약, 타임라인 문장 생성, 재구성 등 **텍스트 생성**.
- **입력**: 본문 전체. 토큰 사용 많고 호출당 비용 큼.
- **법적 리스크**:
  - (1) 본문은 저작물이므로 AI 요약·재구성은 2차적 저작물 생성에 해당할 수 있음. 저작권자 허락 없이 사용 시 침해 소지.
  - (2) 네이버 뉴스 API는 제공 데이터를 그대로 사용하도록 요구하는 경우가 많아, API 데이터 재가공 시 약관 위반 가능.
  - (3) 커뮤니티 본문 수집·AI 요약은 저작권 침해 리스크가 커서 수집 자체를 하지 않기로 한 상태.
- **결론**: 일반 AI(본문 요약·재가공)는 법적으로 가장 예민한 부분이므로 **사용하지 않기로 함**.
  - `01_AI기획.md`, `99_법적이슈없음증명.md`에서 본문 수집·AI 요약·재가공은 영구 제외.

**화력 분석 선택지 (둘 다 법적 리스크 없음):**
- 자체 알고리즘: 메타데이터만으로 수식·규칙 기반 점수 산출. 비용 없음.
- 경량 AI: 메타데이터만 API 입력으로 넣어 화력 지수 등 산출. 월 수천원 이하 가정. 본문 미사용.

---

## 6. 가정 (구현 시 이 값으로 진행)

### 6.1 서비스 개요

**서비스 성격:**
- 한국 이슈(사건/논란)를 한곳에 모아 시간순(발단→전개→파생→진정)으로 보여주는 웹 서비스.
- 이슈 내비게이션형 플랫폼.
- 반응(감정·댓글·투표)을 남기고 여론 흐름 확인.

**핵심 용어:**
- 이슈: 사건/논란 단위
- 타임라인: 시간순 흐름 (발단→전개→파생→진정)
- LifeCycle: 이슈의 생명주기
- MVP: Minimum Viable Product (최소 기능 제품)
- 화력 분석: 메타데이터 기반 이슈 주목도 분석. 표시는 숫자+등급(높음/보통/낮음, 기준 70/30).

### 6.2 디바이스·접근성

**디바이스:**
- 모바일 퍼스트 (모바일에서 한 눈에 파악 가능하도록 우선 설계)
- 반응형 웹 (한 코드베이스로 모바일·태블릿·PC 모두 지원)
- 앱은 확장 단계에서 검토

**로그인:**
- 오픈ID만 사용 (구글·네이버·카카오)
- 로그인 필요: 댓글·감정·투표·토론
- 비로그인 가능: 이슈 조회·타임라인 열람

### 6.3 이슈 분류·상태

**이슈 카테고리:**
- 연예, 스포츠, 정치, 사회, 기술
- 네이버 뉴스 API 카테고리와 1:1 매핑
- 확장 시 추가 카테고리 검토

**이슈 상태:**
- 점화 (Ignited): 막 시작되어 확산 중
- 논란 중 (Debating): 양측 의견 대립 중
- 종결 (Closed): 사과문 발표 또는 결론 도출
- 표시: 텍스트 + 아이콘 (상태별 아이콘 + 텍스트 병기). 아이콘 의미·디자인은 구현 단계에서 결정.

### 6.4 사용자 기능 기본값

**감정 표현:**
- 7종: 좋아요, 싫어요, 화나요, 팝콘각, 응원, 애도, 사이다
- 이슈당 1인 1회. 변경 가능(다른 리액션으로 변경 또는 취소 후 재선택).
- 실시간 집계·표시

**댓글:**
- **상단 베스트 댓글**: 좋아요/싫어요 기준(score = 좋아요−싫어요)으로 계산한 상위 댓글을 상단 영역에 배치. 유튜브처럼 반응이 좋은 댓글을 먼저 노출.
- **아래 댓글 리스트**: 정렬 옵션 **최신순**, **좋아요순**, **싫어요순** 중 사용자가 선택. (최신순 = created_at DESC, 좋아요순 = likes_count DESC, 싫어요순 = dislikes_count DESC.)
- 댓글에는 좋아요/싫어요 가능. 세이프티봇 자동 검토.
- **구현 방안**은 아래 "댓글·베스트/리스트 정렬 (구현 방안, 결정됨)" 참조.

**댓글·베스트/리스트 정렬 (구현 방안, 결정됨):**
- **목표**: 상단은 베스트(score 상위), 아래 목록은 사용자가 최신순/좋아요순/싫어요순 중 선택해 조회.
- **저장**: 댓글(comments) 테이블에 **좋아요 수**, **싫어요 수** 컬럼을 두고, 사용자가 좋아요/싫어요를 누를 때마다 해당 댓글의 카운트를 +1/-1 업데이트. 목록 조회 시 정렬만 빠르게 하려면 댓글 테이블에 denormalized count 두는 편이 쿼리 단순. (개별 반응을 comment_likes 테이블로 저장한 뒤 집계해도 됨.)
- **점수**: **좋아요−싫어요** 방식. `score = likes_count - dislikes_count`. DB에 score 컬럼을 두거나 조회 시 계산.
- **상단 베스트 댓글**: `ORDER BY score DESC, created_at DESC`로 상위 N개(예: 3~5개 또는 10개)만 상단 영역에 노출. 동점이면 최신순.
- **아래 댓글 리스트 정렬(선택)**: (1) **최신순** `ORDER BY created_at DESC`. (2) **좋아요순** `ORDER BY likes_count DESC, created_at DESC`. (3) **싫어요순** `ORDER BY dislikes_count DESC, created_at DESC`. UI에 탭 또는 드롭다운으로 세 옵션 제공. 기본값은 문서상 "최신순" 또는 팀 결정.
- **기본값(리스트)**: 리스트 기본 정렬은 **최신순**. 사용자가 좋아요순·싫어요순으로 전환 가능.

**투표:**
- 이슈당 **복수 투표 가능**. 시점/상황에 따라 여론이 변할 수 있으므로, 한 이슈에 여러 개의 투표를 두고 시점별·상황별로 추적.
- 선택지: 2-4개
- 실시간 그래프·비율 표시
- **이슈 상태(점화/논란중/종결)별 이전 투표 노출**: 복수 투표이므로 "그 시점의 여론"을 나중에도 볼 수 있어야 함. 이슈의 **현재 상태**와 관계없이, **과거 시기(이전 상태)에 진행된 투표의 문항·결과**를 조회할 수 있는 화면 구성을 둠. 아래 "복수 투표·이슈 상태별 화면 구성" 참조.

**복수 투표·이슈 상태별 화면 구성 (고려사항):**
- **연결 방식**: 각 투표를 "해당 투표가 열렸을 때의 이슈 상태(점화/논란중/종결)" 또는 "진행 시점(일시)"과 연결해 저장. 이슈 상세에서 상태·시점별로 그룹핑해 표시 가능하게 함.
- **노출 원칙**: (1) **현재 진행 중인 투표**는 상단 또는 눈에 띄는 영역에 배치. (2) **이전 시기 투표**는 "점화 시기 투표 결과", "논란 중 시기 투표 결과", "종결 시기 투표 결과"처럼 **상태별 블록**으로 구분하거나, **시간순 목록**(가장 최근 과거부터)으로 "이전 투표 보기" 영역 제공. 접기/펼치기 또는 탭으로 정리하면 한 화면 부담을 줄일 수 있음.
- **표시 내용**: 이전 투표마다 "당시 이슈 상태(또는 시점)", "투표 문항·선택지", "득표 결과(비율/그래프)", "투표 마감 여부"를 표시. 현재 상태가 "종결"이어도 과거 "점화/논란중" 시기의 투표 결과를 위와 같이 볼 수 있어야 함.
- **구현 시 선택**: 상태별 탭 vs 시간순 리스트 vs "현재 투표 + 아코디언(이전 투표)" 등은 팀·UX에 따라 결정. DB에는 투표별로 "이슈 상태 스냅샷" 또는 "진행 시작/종료 시점"을 저장해 두면 화면에서 상태·시점별 필터/정렬이 가능함.

**커뮤니티 (메뉴명: "커뮤니티". 구성 용어는 "토론장" 대신 "커뮤니티" 사용.):**
- **역할**: 관리자가 승인한 이슈에서 파생된 토론 주제를, **AI가 생성**하고 **관리자 승인** 후 등록. 등록된 주제에 대해 **철학적 관점**에서 유저가 댓글로 의견을 나누는 공간.
- **토론 주제 생성 흐름**: (1) 관리자 승인된 이슈만 대상. (2) AI가 해당 이슈의 메타데이터(제목, 상태, 카테고리 등, 본문 미사용)를 입력으로 "철학적 관점에서 논의할 수 있는 질문/주제" 문장 생성. (3) 생성된 토론 주제 후보를 관리자 화면에 대기 목록으로 노출. (4) 관리자 승인 시 해당 이슈의 커뮤니티에 토론 주제로 등록. 반려 시 미등록.
- **참여**: 등록된 토론 주제 글 아래에서 유저가 **댓글로 자기 의견** 작성. 투표만 있는 구조가 아니라 **글을 쓸 수 있는** 구조. 철학적 관점에서 토론하도록 안내 문구 사용 가능.
- 세이프티봇 검토 적용(토론 주제에 대한 댓글).
- **화면 구성·정책**은 아래 "커뮤니티 화면 구성 및 정책" 참조.

**커뮤니티 화면 구성 및 정책 (제안):**

- **용어**: 서비스 메뉴·네비게이션에서는 **"커뮤니티"**로 통일. (토론장이라는 호칭은 사용하지 않음.)

- **정책**
  - **토론 주제 출처**: 관리자 승인된 이슈만 AI 토론 주제 생성 대상. 미승인 이슈는 대상 아님.
  - **AI 생성**: 이슈 제목·상태·카테고리·화력 등 **메타데이터만** 입력. 본문·본문 요약 미사용(법적 검토 준수). 출력은 "철학적 관점에서 논의할 수 있는 주제/질문" 1문장 이상. 경량 AI 또는 프롬프트 기반.
  - **관리자 승인**: AI가 생성한 토론 주제 후보를 관리자가 검토 후 승인/반려. 승인한 것만 커뮤니티에 등록. 배치 처리(일 1~2회) 또는 대기 N건 시 처리 가능.
  - **참여 정책**: 로그인 사용자만 댓글 작성. 토론 주제는 "철학적 관점에서 의견을 남겨 주세요" 등 안내. 금칙어·세이프티봇 적용.

- **화면 구성**
  - **메뉴**: 상단/사이드에 **"커뮤니티"** 메뉴 노출. 클릭 시 커뮤니티 진입.
  - **목록·플로우 (MVP에서 (A)(B) 둘 다 구현)**  
    - **(A) 이슈별 진입**: 이슈 상세 화면에 "이 이슈의 커뮤니티" 링크/탭. 클릭 시 **해당 이슈**에 등록된 토론 주제 목록 표시. 목록에서 항목 클릭 시 토론 주제 상세로 이동.  
    - **(B) 전체 목록**: 커뮤니티 메뉴 클릭 시 "전체 토론 주제" 목록(이슈별 그룹핑 또는 플랫 리스트). 각 항목 클릭 시 **토론 주제 상세**로 이동.  
    - **토론 주제 상세** 화면에서는 **"해당 이슈 보기"**(또는 "이 토론의 이슈") 링크/버튼을 두어, **해당 이슈 상세 페이지로 이동**할 수 있게 함. (B) 경로로 들어온 유저도 토론 주제만 보다가 이슈 맥락이 필요하면 이슈 페이지로 이어지는 플로우 확보.
  - **토론 주제 상세**: 상단에 관리자 승인된 **토론 주제 글**(AI 생성 문장). **해당 이슈로 이동** 링크. 그 아래 철학적 관점 토론 유도 안내(아래 "철학적 관점 토론 유도" 참조) + **댓글 목록** + **댓글 작성 폼**(로그인 시). 댓글은 세이프티봇 적용.
  - **관리자 화면**: "AI 생성 토론 주제 후보" 대기 목록. 이슈별로 생성된 주제 문장 표시. 승인 버튼 → 해당 이슈 커뮤니티에 등록. 반려 버튼 → 미등록. 배치로 처리 가능.

- **철학적 관점 토론 유도 (구현 방안)**
  - **안내 문구**: 토론 주제 상세 상단 또는 댓글 작성 영역 위에 짧은 안내 노출. 예: "이 주제에 대해 원인·책임·가치 기준 등 **철학적 관점**에서 의견을 남겨 주세요. 서로 다른 관점을 존중하는 토론을 지향합니다."
  - **주제 문장 톤**: AI 생성 토론 주제는 "~인가?", "~할 수 있을까?", "~의 경계는 어디인가?" 등 **질문형·성찰형**으로 생성하도록 프롬프트/가이드 지정.
  - **작성 placeholder**: 댓글 입력창 placeholder 예: "철학적·윤리적 관점에서 의견을 써 주세요."
  - **가이드라인 노출(선택)**: "토론 가이드" 접기 영역. 확장 시 추가 가능.
  - **직관적 UI(텍스트 외)**는 아래 "철학적 관점 유도 — 직관적 UI" 참조.

- **철학적 관점 유도 — 직관적 UI (텍스트 외)**
  - **영역 시각 구분**: 토론 주제·댓글 영역을 일반 이슈 댓글과 **시각적으로 구분**. 예: 얇은 좌측 보더, 연한 배경색, 또는 카드 형태로 "이곳은 토론 공간"임을 한눈에 구분. 텍스트 없이도 "다른 종류의 공간"이라는 인상 전달.
  - **아이콘·라벨**: 커뮤니티 메뉴·토론 주제 목록·상세 상단에 **일관된 아이콘**(예: 생각/성찰·천칭·대화 거품 등) + 짧은 라벨(예: "관점 나누기", "토론"). 텍스트만이 아니라 아이콘으로 톤을 빠르게 인지하게 함.
  - **관점 선택(쓰기 전 선택)**: 댓글 작성 시 "어떤 관점에서 쓰시나요?" 아래 **칩/버튼 선택**(단일 또는 복수). 예: "원인·책임" / "가치·기준" / "경계·한계" / "정의·공정성". 선택은 선택지로만 두거나, 선택 시 입력창 placeholder를 해당 관점에 맞게 바꿀 수 있음. 쓰기 **전**에 관점을 고르게 해서 성찰형 참여를 유도.
  - **질문 스타터(프롬프트 칩)**: 토론 주제 아래에 **2~3개 짧은 질문 칩** 노출. 예: "이 사건에서 책임의 범위는?", "개인과 집단의 경계는?" 사용자가 칩을 누르면 그 문장이 입력창에 들어가거나, 참고용으로만 노출. 빈 칸 부담을 줄이고 "이런 식으로 답해도 된다"는 걸 직관적으로 보여 줌.
  - **주제 문장 시각 처리**: 토론 주제 문장을 **인용/질문 블록** 스타일로 표시(들여쓰기, 다른 글꼴/색, 또는 인용 아이콘). "질문" 또는 "논의할 주제"가 시각적으로 강조되어, 일반 피드와 구분되고 답하는 맥락이 분명해짐.
  - **정리**: 텍스트 안내에 더해 (1) 영역 구분 (2) 아이콘·라벨 (3) 관점 선택 칩 (4) 질문 스타터 칩 (5) 주제 인용 스타일 을 조합하면, "철학적 관점"이 텍스트만 읽지 않아도 직관적으로 전달됨. MVP에서는 (1)(2)(5)만 적용해도 효과 있음. (3)(4)는 확장 또는 팀 선택.

- **영역 시각 구분 (이슈 댓글과 차별화)**
  - 이슈 상세의 **일반 댓글**은 단순 리스트(카드 나열 또는 테이블형)로 두고, **토론 주제 상세의 댓글**은 아래 "토론 흐름 시각화"와 결합해 **다른 레이아웃·구성**으로 표시. 예: 이슈 = 흰 배경·구분선만, 토론 = 좌측 보더·연한 배경·타임라인 또는 트리 구조. 같은 "댓글" 컴포넌트라도 상위 컨테이너·레이아웃으로 구분해 "여기는 토론 공간"이 한눈에 들어오게 함.

- **토론 흐름 시각화 (어떤 식으로 흘러가는지 표현)**
  - **시간선 레이아웃**: 댓글을 **세로 시간축** 위에 배치. 왼쪽에 시간 또는 "1번째 의견 → 2번째 의견 → …" 순서, 오른쪽에 댓글 카드. 스크롤 = 시간 순서로 논의가 쌓인 흐름. 이슈 댓글이 "최신순/인기순 리스트"라면 토론은 "타임라인"으로 차별화해 "논의가 어떻게 쌓여 왔는지"를 직관적으로 보여 줌.
  - **답글 연결선(대댓글 트리)**: 답글(부모 댓글 ID 있는 댓글)을 **들여쓰기 + 세로선/가선**으로 부모와 연결. "A → B가 A에 반박 → C가 B에 동의" 같은 **대화 사슬**이 시각적으로 드러남. 정렬은 시간순 유지하되, 자식은 부모 직하에 묶어서 표시. 흐름 = "누가 누구에게 말했는지" 가지치기.
  - **관점별 요약·필터(태그 있을 때)**: 댓글에 관점 태그가 있으면 상단에 **"원인·책임 (5) | 가치·기준 (3) | 경계·한계 (2)"** 형태의 탭 또는 칩. 기본은 "전체(시간순)", 탭 선택 시 해당 관점만 필터. "논의가 어떤 관점들로 나뉘어 흐르는지"를 숫자와 한 번에 파악 가능. (관점 선택 칩을 쓰기 전 선택으로 도입했을 때 활용.)
  - **한 줄 요약 카드(선택)**: 토론 상단 고정 영역에 카드 1개. "지금까지 N명 참여, K개 관점" 또는 "원인·책임 5건, 가치·기준 3건 …" 짧은 문장 + (확장 시) 미니 막대/도넛. "논의가 이렇게 쌓여 왔다"는 스냅샷으로 흐름 감각 제공.
  - **핵심 쟁점 고정(선택)**: 답글 수·반응이 많은 댓글 1개를 "이 토론의 쟁점"으로 상단 또는 사이드에 요약·링크로 노출. "지금 논의가 여기로 모여 있다"는 흐름 포인트 제시. 확장 시 적용.
  - **정리**: (1) 시간선 레이아웃 (2) 답글 연결선 트리 로 "시간에 따른 쌓임"과 "누가 누구에게 말하는지" 흐름을 시각화. (3) 관점별 요약·필터 (4) 한 줄 요약 카드 (5) 핵심 쟁점 고정 은 선택 조합. MVP에서는 (1) 또는 (2) 중 하나 + 영역 구분만 해도 이슈 댓글과 다르고 흐름이 보이게 할 수 있음.

- **DB**: 토론 주제(discussion_topics 또는 기존 discussions 활용)에 "연결된 이슈 ID", "토론 주제 문장(본문)", "상태(대기/승인/반려)", "AI 생성 여부", "승인 일시" 등 저장. 해당 주제에 대한 댓글은 기존 댓글 테이블에 "토론 주제 ID"로 연결하거나 전용 토론 댓글 테이블 사용.

- **커뮤니티 기능 법적 검토**: 서비스 내 UGC(댓글·토론 댓글) 운영 시 정보통신망법상 신고 절차·삭제 의무, 저작권·명예훼손 대응, 이용약관 반영 사항. 상세는 `04_서비스노출_법적검토.md` 섹션 8 참조.

### 6.5 관리자 운영 원칙

**개입 최소화:**
- 자동화 우선, 필요한 지점만 사람 개입
- 배치 처리 활용 (일 1-2회)

**이슈 등록:**
- 5건 이상: `issues` 테이블에 `approval_status='대기'`로 자동 등록 + 배너 알람. 관리자는 대기 목록에서 승인/반려.
- B 적용: 8건 이상이고 N(6시간 이상) 무대응 시 자동 승인 (기존 대기 이슈 업데이트 또는 신규 승인 생성).
- 5~7건 구간: 자동 승인 대상 아님, 관리자 배치 처리(일 1~2회)에서만 승인/반려.

**화력 분석 노출:**
- 화력은 메타데이터 기반 수치이므로 **관리자 승인 필수 아님**. 자동 반영 권장(섹션 4 "화력 분석 노출" 참조). 배치 승인을 쓰는 경우에만 대기 목록 검토 후 릴리스(일 1-2회).

**세이프티봇:**
- 금칙어 자동 매칭 → 비공개 처리.
- 관리자 검토: 일 1회 또는 검토 대기 10건 이상 시 배치 검토 후 공개/삭제 결정.

**수집 데이터 연결:**
- 자동 연결 규칙 우선
- 애매한 건만 관리자 화면에서 수동 처리

### 6.6 세이프티봇 동작 원리

**역할:**
- 사용자가 작성한 **댓글·토론글**이 저장될 때 금칙어/키워드에 걸리면 자동으로 차단하고,
- 최종 판단은 사람(관리자)이 하도록 하는 단계를 두는 것.

**흐름:**
1. **저장 시점**: 사용자가 댓글 또는 토론글을 **저장(제출)**할 때마다 서버에서 **금칙어·키워드 목록**과 매칭(필터).
   - AI 의미 분석 없음, 미리 정의한 문자열 목록과의 매칭만 수행.
2. **매칭 시**: 금칙어/키워드에 걸리면 해당 글을 **자동 비공개** 또는 **검토 대기** 상태로 둠.
   - 일반 사용자에게는 노출되지 않고, 관리자만 검토 대기 목록에서 확인 가능.
   - 작성자에게는 다음 문구로 안내: "등록되었습니다. 내용 검토 후 공개되거나 삭제될 수 있습니다."
3. **관리자 검토**: 검토 대기된 글은 일 1회 또는 10건 이상 시 배치로 검토.
   - 관리자가 각 글에 대해 **공개**(오탐·문제 없음) 또는 **삭제**(규칙 위반) 결정.
4. **결과**: 공개 처리된 글만 목록/상세에 노출. 삭제된 글은 서비스에서 제거.

**오탐 방지(자동):**
- (1) **단어 경계 매칭**: 금칙어를 단어(토큰) 단위로만 매칭.
  - 공백·구두점 또는 형태소 경계로 구분된 조각이 목록과 완전 일치할 때만 걸리게 하여, 다른 단어 일부와 겹치는 오탐을 줄임.
- (2) **금칙어 목록 최소화**: 애매한 표현은 제외하고 명확한 위반(욕설·혐오·불법 키워드)만 등록.
  - 나중에 규칙·목록·매칭 방식 변경 가능.
- 선택 이유: 오탐을 사람 개입 없이 줄이기 위함. 단어 단위 매칭으로 "겹쳐 걸리는" 오탐 감소, 목록 최소화로 걸리는 건 자체를 줄임. 오탐 완전 제거는 어려우니 관리자 검토는 유지하고, 운영해 보며 필요 시 조정.

**요약:**
- 금칙어 매칭(자동) → 비공개/검토 대기 → 사람이 공개/삭제 결정.
- 욕설·혐오·불법 정보 등이 그대로 노출되는 것을 막고, 오탐은 관리자 검토로 복구.
- 적용 대상은 댓글·토론글만이며, 감정 표현(좋아요/싫어요 등)·투표는 이 흐름에 포함하지 않음.

---

## 7. MVP 포함 / 제외

### 7.1 MVP 필수 포함

**핵심 기능:**
- 이슈 목록 (카테고리별, 상태별 필터). 기본 정렬: 최신순. 정렬 옵션: 화력순.
- 이슈 상세 (제목, 설명, 상태, 타임라인)
- 타임라인 시각화 (발단→전개→파생→진정)
- 화력 분석 (메타데이터 기반 이슈 화력 지수)

**데이터 수집:**
- 뉴스 수집 (네이버 API, 30분 주기, 데이터 그대로 표시)
- 커뮤니티 메타데이터 수집 (더쿠·네이트판 2곳, 3분 주기)
- 수집 데이터와 이슈 자동 연결

**사용자 기능:**
- 오픈ID 로그인 (구글·네이버·카카오 3종)
- 감정 표현 7종 (좋아요, 싫어요, 화나요, 팝콘각, 응원, 애도, 사이다)
- 댓글 작성·조회 (상단 베스트 score 상위, 아래 리스트 최신순/좋아요순/싫어요순, 좋아요/싫어요)
- 투표 (이슈당 복수 가능, 시점/상황별, 2-4 선택지, 실시간 그래프)
- 커뮤니티 (메뉴명 "커뮤니티". 승인 이슈 기반 AI 토론 주제 생성 → 관리자 승인 → 등록. 유저는 댓글로 철학적 관점 토론.)

**관리자 기능:**
- 이슈 등록 승인 (5건 이상 시 `대기` 자동 등록 + 배너 알람, B 적용: 8건 이상·N 6시간 무대응 시 자동 승인, 나머지 배치 승인)
- 화력 분석 노출 (자동 반영 권장. 배치 승인은 선택 시 일 1-2회)
- 수집 데이터 확인·이슈 연결
- 세이프티봇 검토 (금칙어 자동 매칭, 일 1회 또는 10건 이상 시 배치, 관리자 최종 승인)
- 커뮤니티: AI 토론 주제 후보 승인·등록, 유저 댓글 참여

**기술 스택:**
- Next.js 14+ (App Router), Supabase, Vercel
- 네이버 뉴스 API, 소셜 로그인
- Vercel Cron (뉴스 수집)
- Supabase Edge Functions + Cheerio (커뮤니티 수집)
- 화력 분석 (경량 AI)

### 7.2 MVP 제외 (확장 단계)

**사용자 기능:**
- 개인화·추천 이슈 (데이터 축적 후 추가)
- 알림 (이슈 업데이트 알림)

**콘텐츠 생성:**
- 숏폼 자동 생성·배포 (인스타 릴스, 유튜브 쇼츠, 틱톡)

**로그인:**
- 메타(페이스북) 로그인 (필요 시 추가)

### 7.3 영구 제외 (법적 리스크)

**데이터 수집:**
- 커뮤니티 본문 수집
- 닉네임 수집
- 창작 콘텐츠 수집

**AI 가공:**
- 본문 AI 요약
- 콘텐츠 재가공
- 2차 저작물 생성

---

## 8. 기술·DB·서버 (기준 고정)

### 8.1 기술 스택

**프론트엔드:**
- Next.js 14+ (App Router)
- React Server Components
- TypeScript
- Tailwind CSS (반응형 디자인)

**백엔드:**
- Supabase (PostgreSQL, Auth, Storage)
- Supabase Edge Functions (서버리스)
- Vercel Cron Jobs (스케줄링)

**배포:**
- Vercel (웹 호스팅, CI/CD)
- GitHub (버전 관리)
- 도메인: 배포 시 결정 (예상: whynali.com). whynaly.com 후보.

**외부 API:**
- 네이버 뉴스 API (뉴스 수집)
- 구글·네이버·카카오 소셜 로그인
- Cheerio (커뮤니티 메타데이터 파싱)
- 화력 분석 (경량 AI)

### 8.2 비용 정책

**무료 플랜:**
- Vercel: Hobby 플랜 (웹 배포)
- Supabase: Free 플랜 (DB, Auth)
- 소셜 로그인: 무료
- 네이버 뉴스 API: 무료 (일일 한도 내).
  - 한도 80% 도달 시 알림(이메일+해제형 배너).
  - 한도 근접 시 수집 주기 연장(예: 1시간).
  - 초과 시 당일 중단 후 익일 재개.

**유료 전환 검토:**
- 화력 분석 경량 AI 사용 시: 월 수천원 이하.
- 서버·DB 무료 한도 초과 시:
  - 한도 직전(예: 80%)에 이메일 발송 + 관리자 대시보드 상단 해제형 알림 배너(X로 닫기 전까지 유지).
  - 초과 시점에 사용량 보고 유료 전환 여부 결정.

### 8.3 DB 설계 원칙

**저장 개념:**

| 테이블 | 저장 내용 | 비고 |
|-------|----------|------|
| issues | 이슈 기본 정보 | 제목, 설명, 상태, 카테고리, 화력 지수 |
| timeline_points | 타임라인 포인트 | 시간, 출처 링크, 이슈 연결 |
| users | 사용자 정보 | 오픈ID, 닉네임, 프로필 |
| reactions | 감정 표현 | 좋아요, 싫어요 등 7종 |
| comments | 댓글 | 내용, 작성자, 좋아요 수, 싫어요 수(또는 score=좋아요−싫어요). 인기순 정렬용. |
| votes | 투표 | 이슈별 투표, 선택지. 복수 투표·상태별 노출을 위해 투표별 "진행 시점(시작/종료)" 또는 "해당 시기 이슈 상태(점화/논란중/종결)" 저장 권장. |
| vote_choices | 투표 선택지 | 선택지 내용, 득표수 |
| discussions / discussion_topics | 커뮤니티 토론 주제 | 이슈 연결, AI 생성 주제 문장, 승인 상태. 해당 주제에 대한 유저 댓글 별도 또는 동일 테이블. |
| news_data | 수집된 뉴스 | 네이버 API 데이터 (제목, 링크, 출처, 날짜. 요약문 미수집) |
| community_data | 수집된 커뮤니티 | 메타데이터만 (제목, URL, 조회수, 댓글수, 작성시간) |
| safety_rules | 금칙어·설정 | 세이프티봇 룰 |
| admin_logs | 관리자 로그 | 승인·반려 기록 |

**중요 원칙:**
- 본문 저장 없음 (법적 리스크)
- 메타데이터만 저장 (커뮤니티)
- 출처 링크 필수 저장
- 개인정보 최소화 (닉네임 수집 안 함)

### 8.4 환경 변수

**필수:**
```
SUPABASE_URL
SUPABASE_ANON_KEY
SUPABASE_SERVICE_ROLE_KEY

NAVER_CLIENT_ID
NAVER_CLIENT_SECRET
NAVER_NEWS_API_KEY

KAKAO_CLIENT_ID
KAKAO_CLIENT_SECRET

GOOGLE_CLIENT_ID
GOOGLE_CLIENT_SECRET

NEXTAUTH_URL
NEXTAUTH_SECRET
```

**선택 (화력 분석 경량 AI 사용 시):**
```
AI_ANALYSIS_API_KEY
AI_ANALYSIS_API_URL
```

**프로젝트 시작 전:**
- 네이버 개발자 센터에서 뉴스 API 신청
- 구글·네이버·카카오 소셜 로그인 앱 등록
- Supabase 프로젝트 생성
- 도메인 구매 및 DNS 설정

---

## 9. 참조 문서

### 9.1 기획 문서
- `00_원본.md`: 최초 기획 원본
- `01_기획.md`: AI 참고용 구조화 기획 (절대 수정 금지)
- [01_AI기획.md](./01_AI기획.md): 법적 안전성 반영 AI 기획
- `02_AI기획_판단포인트.md`: 본 문서 (판단 포인트 중심)

### 9.2 법적 검토
- [03_커뮤니티수집_법적검토.md](./03_커뮤니티수집_법적검토.md): 커뮤니티 수집 법적 상세 분석
- [04_서비스노출_법적검토.md](./04_서비스노출_법적검토.md): 노출 허용·금지, UGC·신고 절차
- [99_법적이슈없음증명.md](./99_법적이슈없음증명.md): 전체 법적 근거·판례 종합

### 9.3 실행 계획
- [98_로드맵.md](./98_로드맵.md): 2주 개발 일정·Day별 작업·산출물
- [97_1단계_기초픽스.md](./97_1단계_기초픽스.md): 1단계 픽스 항목·스키마·담당
- [07_이슈등록_화력_정렬_규격.md](./07_이슈등록_화력_정렬_규격.md): 이슈 등록·화력·목록·댓글 정렬 규격 (구현 기준)
- [97_API규약.md](./97_API규약.md): API 주소·요청/응답 규약
- [99_Git협업.md](./99_Git협업.md): 브랜치 전략·공동 작업·충돌 해결

### 9.4 문서 간 관계

```
00_원본.md (기획 원본)
    ↓
01_기획.md (AI 파싱용) ← 수정 금지
    ↓
01_AI기획.md (법적 안전성 반영)
    ↓
02_AI기획_판단포인트.md (본 문서, 판단 포인트)
    ↓
98_로드맵.md (실행 계획)

법적 검토 (병행):
03_커뮤니티수집_법적검토.md (상세)
99_법적이슈없음증명.md (종합)
```

---

## 10. 추가 판단 필요 시

다음 사항이 불명확할 경우 사람에게 질문:

### 10.1 기능 우선순위
- 특정 기능의 MVP 포함 여부 불명확 시
- 기능 간 우선순위 충돌 시
- 리소스 부족으로 기능 선택 필요 시

### 10.2 기술 선택
- 특정 기술 스택의 적합성 의심 시
- 성능·비용 트레이드오프 판단 필요 시
- 대안 기술 검토 필요 시

### 10.3 법적 리스크
- 새로운 데이터 수집 대상 추가 시
- 기존 수집 방식 변경 시
- 사용자 데이터 활용 방식 변경 시

### 10.4 비용 정책
- 무료 플랜 한도 초과 예상 시
- 유료 전환 시점 결정 시
- 비용 최적화 방안 검토 시

### 10.5 사용자 경험
- UI/UX 설계 방향 불명확 시
- 사용자 플로우 충돌 시
- 접근성·사용성 이슈 발견 시

**원칙**: 불명확한 사항은 추측하지 말고, 명확히 질문하여 결정 후 진행.
